<html>
<head>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.2.15.min.js"></script>
    <script type="text/javascript">
    //--- SET THE GLOBAL API keys
    var parse_app_id = "HvWzY9d2JMZkKx37DHCDXmrTWFMVtqHbFWdPaIsn" ;
    var parse_javascript_id = "5UVOxRluuQhnXj2YzpWGUrh5r6oAfCcE5qpA727c" ;
    var parse_rest_id = "ZoKpEeNBk0reOJJTkT4QxCwYzvMkqokNasyoDLhH" ;
    //---SET THE GLOBAL API keys

    Parse.initialize(parse_app_id, parse_javascript_id);

    $(function() {

        var file;

        // Set an event listener on the Choose File field.
        $('#fileselect').bind("change", function(e) {
            var files = e.target.files || e.dataTransfer.files;
            // Our file var now holds the selected file
            file = files[0];
        });




        $('#uploadbutton').click(function() {
            var serverUrl = 'https://api.parse.com/1/files/' + file.name;

            $.ajax({
                type: "POST",
                beforeSend: function(request) {
                    request.setRequestHeader("X-Parse-Application-Id", parse_app_id);
                    request.setRequestHeader("X-Parse-REST-API-Key", parse_rest_id);
                    request.setRequestHeader("Content-Type", file.type);
                },
                url: serverUrl,
                data: file,
                processData: false,
                contentType: false,
                success: function(data) {

                    var myimage = new Parse.Object("image_table");
                    myimage.set({imagetitle: data.name});
                    myimage.set({imageurl: data.url});
                    myimage.set({imagefile: {"name": data.name,"url": data.url,"__type": "File"}});
                    myimage.save();

                    document.getElementById("url").innerHTML = '<a href="' + data.url + '">'+ data.url + '</a>';

                },
                error: function(data) {
                    var obj = jQuery.parseJSON(data);
                    alert(obj.error);
                }
            });
        });


    });
    </script>

</head>

<body>

<form id="fileupload" name="fileupload" enctype="multipart/form-data" method="post"> <fieldset> <input type="file" id="fileselect">

    <input id="uploadbutton" type="button" value="Upload to Parse"/>
</fieldset> </form>

<h3>Image Url:</h3> <div id="url"> <a href="#">http://files.parse.com/...</a> </div>

</body>

</html>